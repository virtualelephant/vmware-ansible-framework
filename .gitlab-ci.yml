stages:
  - lint

.default_python_image: &default_python_image
  image: python:3.12-slim
  before_script:
    - pip install --upgrade pip

yaml_lint:
  stage: lint
  <<: *default_python_image
  before_script:
    - pip install --upgrade pip yamllint
  script:
    # -s: silent (only show errors); lint everything from repo root
    - yamllint -s .

python_check:
  stage: lint
  <<: *default_python_image
  before_script:
    - pip install --upgrade pip flake8
  script:
    # Style/lint
    - flake8 .
    # Basic syntax check for all Python files
    - python -m compileall -q .
